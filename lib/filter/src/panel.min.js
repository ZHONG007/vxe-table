"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_utils=require("../../tools/utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=(0,_vue.defineComponent)({name:"VxeTableFilter",props:{filterStore:Object},setup:function(F){var S=(0,_vue.inject)("$xetable",{}),E=S.reactData,g=S.internalData,O=(0,_vue.computed)(function(){var e=F.filterStore;return e&&e.options.some(function(e){return e.checked})}),T=function(e){F.filterStore.options.forEach(function(e){e.checked=e._checked}),S.confirmFilterEvent(e)},i=function(e,t,l){F.filterStore.options.forEach(function(e){e._checked=!1}),l._checked=t,S.checkFilterOptions(),T(e)},q=function(e){var t=F.filterStore;S.handleClearFilter(t.column),S.confirmFilterEvent(e)},c=function(e,t,l){l._checked=t,S.checkFilterOptions()},C=function(e,t,l){F.filterStore.multiple?c(0,t,l):i(e,t,l)},y=function(e,t){var l,i;F.filterStore.multiple?(l=t,(i=F.filterStore).options.forEach(function(e){e._checked=l,e.checked=l}),i.isAllSelected=l,i.isIndeterminate=!1):q(e)},A={changeRadioOption:i,changeMultipleOption:c,changeAllOption:y,changeOption:C,confirmFilter:T,resetFilter:q};return function(){var e,t,l,i,c,n,r,o,a,s,u,v,f,h,d,x,b=F.filterStore,p=E.initStore,_=b.column,m=_?_.filterRender:null,k=m?_vXETable.VXETable.renderer.get(m.name):null;return(0,_vue.h)("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",k&&k.className?k.className:"",{"is--animat":S.props.animat,"is--multiple":b.multiple,"is--active":b.visible}],style:b.style},p.filter&&b.visible?(o=m,a=k,s=F.filterStore,u=s.column,v=s.multiple,f=s.maxHeight,h=u.slots,d=h?h.filter:null,x=Object.assign({},g._currFilterParams,{$panel:A,$table:S}),d?[(0,_vue.h)("div",{class:"vxe-table--filter-template"},S.callSlot(d,x))]:a&&a.renderFilter?[(0,_vue.h)("div",{class:"vxe-table--filter-template"},a.renderFilter(o,x))]:[(0,_vue.h)("ul",{class:"vxe-table--filter-header"},[(0,_vue.h)("li",{class:["vxe-table--filter-option",{"is--checked":v?s.isAllSelected:!s.options.some(function(e){return e._checked}),"is--indeterminate":v&&s.isIndeterminate}],title:_conf.default.i18n(v?"vxe.table.allTitle":"vxe.table.allFilter"),onClick:function(e){y(e,!s.isAllSelected)}},(v?[(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})]:[]).concat([(0,_vue.h)("span",{class:"vxe-checkbox--label"},_conf.default.i18n("vxe.table.allFilter"))]))]),(0,_vue.h)("ul",{class:"vxe-table--filter-body",style:f?{maxHeight:f+"px"}:{}},s.options.map(function(t){return(0,_vue.h)("li",{class:["vxe-table--filter-option",{"is--checked":t._checked}],title:t.label,onClick:function(e){C(e,!t._checked,t)}},(v?[(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})]:[]).concat([(0,_vue.h)("span",{class:"vxe-checkbox--label"},(0,_utils.formatText)(t.label,1))]))}))]).concat((e=F.filterStore,t=e.column,l=e.multiple,i=O.value,c=t.filterRender,n=c?_vXETable.VXETable.renderer.get(c.name):null,r=!i&&!e.isAllSelected&&!e.isIndeterminate,!l||n&&!1===n.showFilterFooter?[]:[(0,_vue.h)("div",{class:"vxe-table--filter-footer"},[(0,_vue.h)("button",{class:{"is--disabled":r},disabled:r,onClick:T},_conf.default.i18n("vxe.table.confirmFilter")),(0,_vue.h)("button",{onClick:q},_conf.default.i18n("vxe.table.resetFilter"))])])):[])}}});exports.default=_default;